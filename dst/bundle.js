/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _commands__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commands */ \"./src/commands.ts\");\n/* harmony import */ var _lib_elmMapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/elmMapper */ \"./src/lib/elmMapper.ts\");\n/* harmony import */ var _lib_genToken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/genToken */ \"./src/lib/genToken.ts\");\n/* harmony import */ var _lib_strage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/strage */ \"./src/lib/strage.ts\");\n// editor-setup.ts\n\n\n\n\nconst editor = document.getElementById('editor');\nlet currentNoteId = (0,_lib_genToken__WEBPACK_IMPORTED_MODULE_2__.genToken)();\n// ï¼ˆä½¿ã£ã¦ã„ã‚‹ãªã‚‰ï¼‰æ®‹ã™ï¼šdocument.execCommand('defaultParagraphSeparator', false, 'p')\nfunction findCommandAtEnd(text) {\n    for (const cmd of _commands__WEBPACK_IMPORTED_MODULE_0__.commands) {\n        if (cmd.type === 'endsWith') {\n            if (text.endsWith(cmd.pattern)) {\n                return { cmd, match: null, lengthToDelete: cmd.pattern.length };\n            }\n        }\n        else {\n            let patterns = [];\n            if (cmd.pattern instanceof RegExp) {\n                patterns = [cmd.pattern];\n            }\n            else {\n                patterns = cmd.pattern;\n            }\n            for (const pattern of patterns) {\n                const m = text.match(pattern);\n                if (m) {\n                    // æ­£è¦è¡¨ç¾ã¯å¿…ãšæœ«å°¾ $ ã‚’æ¨å¥¨ã—ã¦ã„ã‚‹ã®ã§ m[0] ã®é•·ã•ã‚’å‰Šé™¤\n                    return { cmd, match: m, lengthToDelete: m[0].length };\n                }\n            }\n        }\n    }\n    return null;\n}\neditor.onkeydown = (e) => {\n    // ---- Spaceã§ã‚³ãƒãƒ³ãƒ‰ç™ºç« ----\n    if (e.key === ' ') {\n        const sel = window.getSelection();\n        if (!sel?.rangeCount)\n            return;\n        const range = sel.getRangeAt(0);\n        if (!range.collapsed)\n            return;\n        const node = range.startContainer;\n        if (node.nodeType !== Node.TEXT_NODE)\n            return;\n        // ç›´å‰ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ï¼ˆé•·ã™ãã‚‹ã¨é‡ã„ã®ã§é©åº¦ã«åˆ‡ã‚‹ï¼‰\n        const data = node.data;\n        const offset = range.startOffset;\n        const lookBehind = Math.max(0, offset - Math.max(64, (0,_commands__WEBPACK_IMPORTED_MODULE_0__.maxEndsWithLength)(_commands__WEBPACK_IMPORTED_MODULE_0__.commands)));\n        const head = data.slice(0, offset);\n        const tail = head.slice(lookBehind); // ç›´å‰ä¸€éƒ¨\n        const found = findCommandAtEnd(tail);\n        if (!found)\n            return;\n        // Spaceã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’æ­¢ã‚ã‚‹ï¼ˆç©ºç™½æŒ¿å…¥ã‚’é˜²ãï¼‰\n        e.preventDefault();\n        // æœ«å°¾ã‹ã‚‰ lengthToDelete ã¶ã‚“å‰Šé™¤\n        const deleteStart = Math.max(0, offset - found.lengthToDelete);\n        range.setStart(node, deleteStart);\n        range.deleteContents();\n        // ãƒãƒ¼ãƒ‰æŒ¿å…¥\n        const elmMap = found.cmd.type === 'endsWith'\n            ? found.cmd.build(null)\n            : found.cmd.build(found.match);\n        const elms = (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_1__.parseElmMap)(elmMap);\n        // è¤‡æ•°è¦ç´ ã‚’é †ã«å·®ã—è¾¼ã‚€ï¼ˆRange ã¯æœ€å¾Œã«å·®ã—è¾¼ã¾ã‚ŒãŸå¾Œã«ç§»å‹•ï¼‰\n        for (const elm of elms) {\n            range.insertNode(elm);\n            // æŒ¿å…¥å¾Œã€ã‚­ãƒ£ãƒ¬ãƒƒãƒˆã‚’ç›´å¾Œã«ç§»å‹•ã§ãã‚‹ã‚ˆã†ã«æœ«å°¾ã¸å¯„ã›ã‚‹\n            range.setStartAfter(elm);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n    }\n    // ---- Enterï¼ˆp ã‚’æ–°è¦æŒ¿å…¥ã—ã¦æ”¹è¡Œï¼‰ ----\n    if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        const sel = window.getSelection();\n        if (!sel)\n            return;\n        const range = sel.getRangeAt(0);\n        // æ–°è¦ <p><br></p>\n        const nextP = (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_1__.parseElmMap)([{ tagName: 'p', children: [{ tagName: 'br' }] }])[0];\n        if (!nextP)\n            return;\n        let target = range.startContainer;\n        while (target.parentElement?.id !== 'editor') {\n            if (!target.parentElement)\n                return;\n            target = target.parentElement;\n        }\n        if (target instanceof HTMLElement) {\n            target.insertAdjacentElement('afterend', nextP);\n            const newRange = document.createRange();\n            newRange.setStart(nextP, 0);\n            newRange.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(newRange);\n        }\n    }\n    // ---- Escapeï¼ˆspan æ”¹è¡Œã‚’æŒ¿å…¥ï¼Ÿæ—¢å­˜ã®å‹•ãç¶­æŒï¼‰----\n    if (e.key === 'Escape') {\n        e.preventDefault();\n        const sel = window.getSelection();\n        if (!sel)\n            return;\n        const range = sel.getRangeAt(0);\n        const brSpan = (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_1__.parseElmMap)([{ tagName: 'span', children: [{ tagName: 'br' }] }])[0];\n        if (!brSpan)\n            return;\n        let target = range.startContainer;\n        while (target.parentElement?.parentElement?.id !== 'editor') {\n            if (!target.parentElement)\n                return;\n            target = target.parentElement;\n        }\n        if (target instanceof HTMLElement) {\n            target.insertAdjacentElement('afterend', brSpan);\n            const newRange = document.createRange();\n            newRange.setStart(brSpan, 0);\n            newRange.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(newRange);\n        }\n    }\n    if (e.key === '-') {\n        e.preventDefault();\n        document.execCommand('insertText', false, 'âˆ’');\n    }\n    if (e.altKey) {\n        switch (e.key) {\n            case \"0\": {\n                document.execCommand('formatblock', false, 'p');\n                break;\n            }\n            case \"1\": {\n                document.execCommand('formatblock', false, 'h1');\n                break;\n            }\n            case \"2\": {\n                document.execCommand('formatblock', false, 'h2');\n                break;\n            }\n            case \"3\": {\n                document.execCommand('formatblock', false, 'h3');\n                break;\n            }\n        }\n    }\n};\nconst savesListArea = document.getElementById('saves');\nfunction loadNotes() {\n    if (savesListArea) {\n        const saves = _lib_strage__WEBPACK_IMPORTED_MODULE_3__.Storage.list();\n        console.log({ currentNoteId, id: saves.map(s => s.id) });\n        const savesElmMap = saves.map(save => ({\n            tagName: 'div',\n            attributes: {\n                'onclick': 'loadNote(\"' + save.id + '\")'\n            },\n            textContent: `${save.title}`,\n            class: (currentNoteId === save.id ? 'here' : '') + ' sidebar__btn',\n            children: [\n                {\n                    tagName: 'small',\n                    textContent: save.updatedAt\n                }\n            ]\n        }));\n        const savesElms = (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_1__.parseElmMap)(savesElmMap);\n        savesListArea.innerHTML = '';\n        for (const savedElm of savesElms) {\n            savesListArea.appendChild(savedElm);\n        }\n    }\n}\nloadNotes();\nfunction saveNote() {\n    _lib_strage__WEBPACK_IMPORTED_MODULE_3__.Storage.save({\n        id: currentNoteId,\n        html: editor.innerHTML,\n        title: document.getElementById('title')?.textContent ?? '',\n        updatedAt: new Date().toISOString(),\n        version: 0\n    });\n    alert('ãƒãƒ¼ãƒˆã‚’ä¿å­˜ã—ã¾ã—ãŸ');\n    loadNotes();\n}\nconst saveBtn = document.getElementById('saveBtn');\nif (saveBtn)\n    saveBtn.onclick = saveNote;\n// @ts-ignore\nwindow.loadNote = function (id) {\n    const data = _lib_strage__WEBPACK_IMPORTED_MODULE_3__.Storage.load(id);\n    if (data) {\n        currentNoteId = data.id;\n        editor.innerHTML = data.html;\n        alert(`ãƒãƒ¼ãƒˆã€Œ${data.title}ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);\n        loadNotes();\n    }\n    else {\n        alert('èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼');\n    }\n};\n\n\n//# sourceURL=webpack://notex/./src/app.ts?\n}");

/***/ }),

/***/ "./src/commands.ts":
/*!*************************!*\
  !*** ./src/commands.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   commands: () => (/* binding */ commands),\n/* harmony export */   maxEndsWithLength: () => (/* binding */ maxEndsWithLength)\n/* harmony export */ });\n/* harmony import */ var _elmMaps_integral__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./elmMaps/integral */ \"./src/elmMaps/integral.ts\");\n/* harmony import */ var _elmMaps_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./elmMaps/matrix */ \"./src/elmMaps/matrix.ts\");\n/* harmony import */ var _elmMaps_sigma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./elmMaps/sigma */ \"./src/elmMaps/sigma.ts\");\n/* harmony import */ var _elmMaps_sqrt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./elmMaps/sqrt */ \"./src/elmMaps/sqrt.ts\");\n/* harmony import */ var _lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/elmMapper */ \"./src/lib/elmMapper.ts\");\n// commands.ts\n\n\n\n\n\n// ã“ã“ã§å„ªå…ˆé †ï¼ˆå‰ã‹ã‚‰é †ã«åˆ¤å®šï¼‰\nconst commands = [\n    {\n        type: 'endsWith',\n        pattern: '\\\\span',\n        build: () => [\n            {\n                tagName: 'span',\n                textContent: 'something1',\n                class: 'spmeclass',\n            },\n            {\n                tagName: 'span',\n                textContent: 'something2',\n                class: 'spmeclass',\n            }\n        ]\n    },\n    {\n        // æœ«å°¾ã®ã€Œa/bã€ã€Œ3/2ã€ãªã©ã‚’åˆ†æ•°ãƒãƒ¼ãƒ‰ã«å¤‰æ›\n        type: 'regexp',\n        pattern: [\n            /([A-Za-z0-9]+)\\/([A-Za-z0-9]+)\\s*$/,\n            /\\(([A-Za-z0-9\\-\\+ ]+)\\)\\/(\\([A-Za-z0-9\\-\\+ ]+\\))\\s*$/,\n            /\\(([A-Za-z0-9\\-\\+ ]+)\\)\\/([A-Za-z0-9\\-\\+ ]+)\\s*$/,\n            /([A-Za-z0-9\\-\\+ ]+)\\/\\(([A-Za-z0-9\\-\\+ ]+)\\)\\s*$/,\n        ],\n        build: (m) => {\n            const numerator = m[1];\n            const denominator = m[2];\n            return [{\n                    tagName: 'div',\n                    class: 'math-only fraction',\n                    children: [\n                        { tagName: 'div', class: 'fraction__top', contenteditable: true, textContent: numerator ?? '' },\n                        { tagName: 'div', class: 'fraction__bottom', contenteditable: true, textContent: denominator ?? '' },\n                    ]\n                },\n                {\n                    tagName: 'br'\n                }\n            ];\n        }\n    },\n    {\n        // sup\n        type: 'regexp',\n        pattern: [\n            /\\^([A-Za-z0-9]+)\\s*$/,\n            /\\^(\\([A-Za-z0-9\\-\\+ ]+\\))\\s*$/\n        ],\n        build: (m) => {\n            const numerator = m[1];\n            return [{\n                    tagName: 'sup',\n                    class: 'math-only',\n                    textContent: numerator ?? ''\n                },\n                {\n                    tagName: 'div',\n                    class: 'blank'\n                }\n            ];\n        }\n    },\n    {\n        // sup\n        type: 'regexp',\n        pattern: [\n            /\\_([A-Za-z0-9]+)\\s*$/,\n            /\\_(\\([A-Za-z0-9\\-\\+ ]+\\))\\s*$/\n        ],\n        build: (m) => {\n            const numerator = m[1];\n            return [{\n                    tagName: 'sub',\n                    class: 'math-only',\n                    textContent: numerator ?? ''\n                },\n                {\n                    tagName: 'div',\n                    class: 'blank',\n                    // textContent: '\\u200B'\n                }\n            ];\n        }\n    },\n    {\n        // ã‚¹ãƒ©ãƒƒã‚·ãƒ¥å˜ä½“ã§åˆ†æ•°ã®ç©ºæ ã‚’å‡ºã™ï¼ˆæ—¢å­˜ã¨åŒç­‰ï¼‰\n        type: 'endsWith',\n        pattern: '\\\\',\n        build: () => [{\n                tagName: 'div',\n                class: 'math-only fraction',\n                children: [\n                    { tagName: 'div', class: 'fraction__top blank', contenteditable: true },\n                    { tagName: 'div', class: 'fraction__bottom blank', contenteditable: true },\n                ]\n            }, {\n                tagName: 'br'\n            }]\n    },\n    {\n        // æ—¢å­˜ã®ç©åˆ†ï¼ˆ/intï¼‰\n        type: 'endsWith',\n        pattern: '\\\\int',\n        build: () => _elmMaps_integral__WEBPACK_IMPORTED_MODULE_0__.integralElmMap\n    },\n    {\n        // æ—¢å­˜ã®ç©åˆ†ï¼ˆ/intï¼‰\n        type: 'endsWith',\n        pattern: '\\\\sigma',\n        build: () => _elmMaps_sigma__WEBPACK_IMPORTED_MODULE_2__.sigmaElmMap\n    },\n    { type: 'endsWith', pattern: '\\\\sqrt', build: () => _elmMaps_sqrt__WEBPACK_IMPORTED_MODULE_3__.sqrtElmMap },\n    { type: 'endsWith', pattern: '\\\\mat', build: () => _elmMaps_matrix__WEBPACK_IMPORTED_MODULE_1__.matrixElmMap },\n    // ----------------------------------------------------\n    // 3. å˜ä¸€è¨˜å· (EndsWith) - å„ªå…ˆåº¦æœ€ä½\n    // ----------------------------------------------------\n    // è«–ç†\n    { type: 'endsWith', pattern: '\\\\imp', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('â‡’') },\n    { type: 'endsWith', pattern: '\\\\iff', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âŸº') },\n    // é›†åˆ\n    { type: 'endsWith', pattern: '\\\\in', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âˆˆ') },\n    { type: 'endsWith', pattern: '\\\\notin', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âˆ‰') },\n    { type: 'endsWith', pattern: '\\\\sub', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âŠ‚') },\n    { type: 'endsWith', pattern: '\\\\cap', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âˆ©') },\n    { type: 'endsWith', pattern: '\\\\cup', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âˆª') },\n    // ã‚®ãƒªã‚·ãƒ£æ–‡å­—\n    { type: 'endsWith', pattern: '\\\\pi', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Ï€') },\n    { type: 'endsWith', pattern: '\\\\alpha', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î±') },\n    { type: 'endsWith', pattern: '\\\\a', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î±') },\n    { type: 'endsWith', pattern: '\\\\beta', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î²') },\n    { type: 'endsWith', pattern: '\\\\b', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î²') },\n    { type: 'endsWith', pattern: '\\\\gamma', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î³') },\n    { type: 'endsWith', pattern: '\\\\c', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î³') },\n    { type: 'endsWith', pattern: '\\\\theta', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î¸') },\n    { type: 'endsWith', pattern: '\\\\t', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Î¸') },\n    // ãã®ä»–\n    { type: 'endsWith', pattern: '\\\\pm', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('Â±') },\n    { type: 'endsWith', pattern: '\\\\inf', build: () => (0,_lib_elmMapper__WEBPACK_IMPORTED_MODULE_4__.createTextElmMap)('âˆ') },\n];\nfunction maxEndsWithLength(cmds) {\n    return Math.max(1, ...cmds\n        .filter(c => c.type === 'endsWith')\n        .map(c => c.pattern.length));\n}\n\n\n//# sourceURL=webpack://notex/./src/commands.ts?\n}");

/***/ }),

/***/ "./src/elmMaps/integral.ts":
/*!*********************************!*\
  !*** ./src/elmMaps/integral.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   integralElmMap: () => (/* binding */ integralElmMap)\n/* harmony export */ });\nconst integralElmMap = [{\n        // å…¨ä½“ã‚’å›²ã‚€ã‚³ãƒ³ãƒ†ãƒŠ (div.math-only.integral)\n        tagName: 'div',\n        class: 'math-only integral',\n        children: [\n            {\n                tagName: 'span',\n                textContent: 'ã€€'\n            },\n            // ç©åˆ†è¨˜å· (div.integral__signal)\n            {\n                tagName: 'div',\n                class: 'integral__signal',\n                textContent: 'âˆ«', // Unicodeã®ç©åˆ†è¨˜å·\n                contenteditable: false\n            },\n            // ç©åˆ†ç¯„å›²ã‚³ãƒ³ãƒ†ãƒŠ (div.integral__range)\n            {\n                tagName: 'div',\n                class: 'integral__range',\n                children: [\n                    // ç¯„å›²ä¸Šé™ (span.integral__range__start)\n                    {\n                        tagName: 'span',\n                        class: 'integral__range__start blank',\n                        contenteditable: true,\n                        // ã‚«ãƒ¼ã‚½ãƒ«ã‚’é…ç½®ã—ã€é«˜ã•ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã® <br>\n                        // children: [{ tagName: 'br' }] \n                    },\n                    // ç¯„å›²ä¸‹é™ (span.integral__range__end)\n                    {\n                        tagName: 'span',\n                        class: 'integral__range__end blank',\n                        contenteditable: true,\n                        // ã‚«ãƒ¼ã‚½ãƒ«ã‚’é…ç½®ã—ã€é«˜ã•ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã® <br>\n                        // children: [{ tagName: 'br' }]\n                    },\n                ]\n            },\n            // è¢«ç©åˆ†é–¢æ•° (div.integral__content)\n            {\n                tagName: 'div',\n                class: 'integral__content blank',\n                contenteditable: true,\n                focus: true\n                // ã‚«ãƒ¼ã‚½ãƒ«ã‚’é…ç½®ã—ã€é«˜ã•ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã® <br>\n                // children: [{ tagName: 'br' }]\n            },\n        ]\n    },\n    {\n        tagName: 'br'\n    }\n];\n\n\n//# sourceURL=webpack://notex/./src/elmMaps/integral.ts?\n}");

/***/ }),

/***/ "./src/elmMaps/matrix.ts":
/*!*******************************!*\
  !*** ./src/elmMaps/matrix.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matrixElmMap: () => (/* binding */ matrixElmMap)\n/* harmony export */ });\nconst matrixElmMap = [{\n        tagName: 'div',\n        class: 'math-only matrix',\n        children: [\n            // æ‹¬å¼§ï¼ˆå·¦ï¼‰- ãƒ‡ã‚¶ã‚¤ãƒ³ã«å¿œã˜ã¦ 'span' ã‚’ä½¿ç”¨\n            { tagName: 'span', class: 'matrix__bracket matrix__bracket--left', textContent: '[' },\n            // è¡Œåˆ—ã®ã‚»ãƒ«ã‚’é…ç½®ã™ã‚‹ã‚°ãƒªãƒƒãƒ‰ã‚³ãƒ³ãƒ†ãƒŠ\n            {\n                tagName: 'div',\n                class: 'matrix__grid',\n                children: [\n                    // 1è¡Œç›®\n                    { tagName: 'div', class: 'matrix__cell', contenteditable: true, children: [{ tagName: 'br' }] },\n                    { tagName: 'div', class: 'matrix__cell', contenteditable: true, children: [{ tagName: 'br' }] },\n                    // 2è¡Œç›®\n                    { tagName: 'div', class: 'matrix__cell', contenteditable: true, children: [{ tagName: 'br' }] },\n                    { tagName: 'div', class: 'matrix__cell', contenteditable: true, children: [{ tagName: 'br' }] },\n                ]\n            },\n            // æ‹¬å¼§ï¼ˆå³ï¼‰\n            { tagName: 'span', class: 'matrix__bracket matrix__bracket--right', textContent: ']' },\n        ]\n    }];\n// ğŸš¨ CSSãƒ’ãƒ³ãƒˆ: .matrix__grid ã«ã¯ã€ 'display: grid; grid-template-columns: repeat(2, 1fr);' ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n\n//# sourceURL=webpack://notex/./src/elmMaps/matrix.ts?\n}");

/***/ }),

/***/ "./src/elmMaps/sigma.ts":
/*!******************************!*\
  !*** ./src/elmMaps/sigma.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sigmaElmMap: () => (/* binding */ sigmaElmMap)\n/* harmony export */ });\n// ElmMapItem ã®å‹å®šç¾©ã¯çœç•¥ï¼ˆå‰å›ã®å›ç­”ã§å®šç¾©æ¸ˆã¿ï¼‰\nconst sigmaElmMap = [{\n        // å…¨ä½“ã‚’å›²ã‚€ã‚³ãƒ³ãƒ†ãƒŠ (div.math-only.sigma)\n        tagName: 'div',\n        class: 'math-only sigma',\n        children: [\n            // ã‚·ã‚°ãƒè¨˜å· (div.sigma__signal)\n            {\n                tagName: 'div',\n                class: 'sigma__signal',\n                textContent: 'âˆ‘' // Unicode: N-ary summation (&#x2211;)\n            },\n            // ç¯„å›²ã‚³ãƒ³ãƒ†ãƒŠ (div.sigma__range)\n            // ã‚·ã‚°ãƒè¨˜å·ã®ä¸Šä¸‹ã«ç¯„å›²ã‚’é…ç½®ã™ã‚‹å½¹å‰²\n            {\n                tagName: 'div',\n                class: 'sigma__range',\n                children: [\n                    // ç¯„å›²ä¸Šé™ï¼ˆspan.sigma__range__startï¼‰\n                    {\n                        tagName: 'span',\n                        class: 'sigma__range__start blank',\n                        contenteditable: true,\n                        // children: [{ tagName: 'br' }] // ã‚«ãƒ¼ã‚½ãƒ«é…ç½®ç”¨\n                    },\n                    // ç¯„å›²ä¸‹é™ï¼ˆspan.sigma__range__endï¼‰\n                    {\n                        tagName: 'span',\n                        class: 'sigma__range__end blank',\n                        contenteditable: true,\n                        // children: [{ tagName: 'br' }] // ã‚«ãƒ¼ã‚½ãƒ«é…ç½®ç”¨\n                    },\n                ]\n            },\n            // è¢«ç·å’Œé–¢æ•° (div.sigma__content)\n            {\n                tagName: 'div',\n                class: 'sigma__content blank',\n                contenteditable: true,\n                children: [{ tagName: 'br' }]\n            },\n        ]\n    }];\n\n\n//# sourceURL=webpack://notex/./src/elmMaps/sigma.ts?\n}");

/***/ }),

/***/ "./src/elmMaps/sqrt.ts":
/*!*****************************!*\
  !*** ./src/elmMaps/sqrt.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sqrtElmMap: () => (/* binding */ sqrtElmMap)\n/* harmony export */ });\nconst sqrtElmMap = [{\n        // å…¨ä½“ã‚’å›²ã‚€ã‚³ãƒ³ãƒ†ãƒŠã‚’ <div> ã‹ã‚‰ <span> ã«å¤‰æ›´ã—ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§ã®ä½¿ç”¨ã«å¯¾å¿œ\n        tagName: 'span',\n        class: 'math-only sqrt',\n        children: [\n            // 1. nä¹—æ ¹ã® n ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰\n            // {\n            //     tagName: 'span',\n            //     class: 'sqrt__index blank',\n            //     contenteditable: true,\n            //     children: [{ tagName: 'br' }] // ã‚«ãƒ¼ã‚½ãƒ«é…ç½®ç”¨\n            // },\n            // 2. ãƒ«ãƒ¼ãƒˆè¨˜å·éƒ¨åˆ† (U+221A)\n            {\n                tagName: 'span',\n                class: 'sqrt__symbol',\n                textContent: 'âˆš',\n            },\n            // 3. ç·¨é›†å¯èƒ½éƒ¨åˆ†ï¼ˆãƒ«ãƒ¼ãƒˆã®ä¸­èº«ï¼‰\n            {\n                tagName: 'span', // <div>ã‹ã‚‰<span>ã«å¤‰æ›´ã—ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚’ç¶­æŒ\n                class: 'sqrt__content blank',\n                contenteditable: true,\n                focus: true\n            },\n        ]\n    },\n    { tagName: 'br' }\n];\n\n\n//# sourceURL=webpack://notex/./src/elmMaps/sqrt.ts?\n}");

/***/ }),

/***/ "./src/lib/elmMapper.ts":
/*!******************************!*\
  !*** ./src/lib/elmMapper.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTextElmMap: () => (/* binding */ createTextElmMap),\n/* harmony export */   parseElmMap: () => (/* binding */ parseElmMap)\n/* harmony export */ });\nconst elmMap1 = [{\n        tagName: 'div',\n        class: 'something',\n        children: [\n            {\n                tagName: 'div',\n                class: 'another-thing',\n                textContent: 'Hello' // ä¾‹ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ \n            }\n        ]\n    }];\n/**\n * è¦ç´ ãƒãƒƒãƒ—ã®é…åˆ—ã‹ã‚‰DOMè¦ç´ ã®é…åˆ—ã‚’å†å¸°çš„ã«ç”Ÿæˆã™ã‚‹é–¢æ•°\n * @param elmMap è¦ç´ ãƒãƒƒãƒ—ã®é…åˆ—\n * @returns ç”Ÿæˆã•ã‚ŒãŸHTMLElementã®é…åˆ—\n */\nfunction parseElmMap(elmMap) {\n    const elms = [];\n    elmMap.forEach(elm => {\n        // 1. è¦ç´ ã®ä½œæˆ\n        const newElm = document.createElement(elm.tagName);\n        // 2. ã‚¯ãƒ©ã‚¹åã®è¨­å®š\n        // ğŸ’¡ ä¿®æ­£ç‚¹: `className`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ç›´æ¥æ–‡å­—åˆ—ã‚’ä»£å…¥ã—ã¾ã™ã€‚\n        // `classList.add()`ã‚’ä½¿ã†å ´åˆã¯ã€elm.classã«è¤‡æ•°ã®ã‚¯ãƒ©ã‚¹ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚\n        if (elm.class) {\n            newElm.className = elm.class;\n        }\n        // 3. ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¨­å®š\n        if (elm.textContent) {\n            newElm.textContent = elm.textContent;\n        }\n        // 4. ãã®ä»–ã®å±æ€§ã®è¨­å®š (ä¾‹: contenteditable)\n        if (elm.attributes) {\n            for (const key in elm.attributes) {\n                newElm.setAttribute(key, elm.attributes[key] ?? '');\n            }\n        }\n        if (elm.contenteditable !== undefined) {\n            newElm.setAttribute('contenteditable', elm.contenteditable.toString());\n        }\n        // 5. å­è¦ç´ ã®å†å¸°çš„ãªå‡¦ç†ã¨è¿½åŠ \n        if (elm.children) {\n            // ğŸ’¡ ä¿®æ­£ç‚¹: å†å¸°å‘¼ã³å‡ºã—ã®çµæœã¯HTMLElementã®é…åˆ—ãªã®ã§ã€\n            // spreadæ¼”ç®—å­ã¾ãŸã¯forEachã§ä¸€ã¤ãšã¤`appendChild`ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n            const childElms = parseElmMap(elm.children);\n            childElms.forEach(child => newElm.appendChild(child));\n        }\n        if (elm.focus) {\n            const selection = document.getSelection();\n            selection?.removeAllRanges();\n            const newRange = document.createRange();\n            newRange.setStart(newElm, 0);\n            newRange.setEnd(newElm, 0);\n            setTimeout(() => {\n                selection?.addRange(newRange);\n            }, 300);\n        }\n        elms.push(newElm);\n    });\n    return elms;\n}\n// console.log(parseElmMap(elmMap1)); // å®Ÿè¡Œçµæœã¯DOMè¦ç´ ã®é…åˆ—\nconst createTextElmMap = (text) => [{\n        tagName: 'span',\n        class: 'math-symbol', // CSSã§ãƒ•ã‚©ãƒ³ãƒˆã‚’ç¢ºå®Ÿã«é©ç”¨ã™ã‚‹ãŸã‚ã«ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸\n        textContent: text\n    }];\n\n\n//# sourceURL=webpack://notex/./src/lib/elmMapper.ts?\n}");

/***/ }),

/***/ "./src/lib/genToken.ts":
/*!*****************************!*\
  !*** ./src/lib/genToken.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   genToken: () => (/* binding */ genToken)\n/* harmony export */ });\nfunction genToken() {\n    // ä½¿ç”¨ã™ã‚‹è‹±æ•°å­—ã‚’å¤‰æ•°charã«æŒ‡å®š\n    const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';\n    // ç©ºæ–‡å­—åˆ—ã‚’ç”¨æ„\n    let randomStr = '';\n    // ç”¨æ„ã—ãŸç©ºæ–‡å­—åˆ—ã«ãƒ©ãƒ³ãƒ€ãƒ ãªè‹±æ•°å­—ã‚’æ ¼ç´ï¼ˆ7æ¡ï¼‰\n    for (let i = 0; i < 7; i++) {\n        randomStr += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return randomStr;\n}\n\n\n//# sourceURL=webpack://notex/./src/lib/genToken.ts?\n}");

/***/ }),

/***/ "./src/lib/strage.ts":
/*!***************************!*\
  !*** ./src/lib/strage.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Storage: () => (/* binding */ Storage)\n/* harmony export */ });\nconst DOC_KEY = (id) => `notex:doc:${id}`;\nconst INDEX_KEY = `notex:index`;\nconst Storage = {\n    load(id) {\n        const raw = localStorage.getItem(DOC_KEY(id));\n        if (!raw)\n            return null;\n        try {\n            return JSON.parse(raw);\n        }\n        catch {\n            return null;\n        }\n    },\n    save(doc) {\n        localStorage.setItem(DOC_KEY(doc.id), JSON.stringify(doc));\n        // ç°¡æ˜“ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆæœ€è¿‘é–‹ã„ãŸãƒãƒ¼ãƒˆç®¡ç†ï¼‰\n        const idx = JSON.parse(localStorage.getItem(INDEX_KEY) ?? `{}`);\n        idx[doc.id] = { title: doc.title, updatedAt: doc.updatedAt };\n        localStorage.setItem(INDEX_KEY, JSON.stringify(idx));\n    },\n    list() {\n        const idx = JSON.parse(localStorage.getItem(INDEX_KEY) ?? `{}`);\n        return Object.entries(idx)\n            .map(([id, v]) => ({ id, title: v.title, updatedAt: v.updatedAt }))\n            .sort((a, b) => b.updatedAt - a.updatedAt);\n    },\n};\n\n\n//# sourceURL=webpack://notex/./src/lib/strage.ts?\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.ts");
/******/ 	
/******/ })()
;